(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{395:function(e,t,s){var n={"./af":252,"./af.js":252,"./ar":253,"./ar-dz":254,"./ar-dz.js":254,"./ar-kw":255,"./ar-kw.js":255,"./ar-ly":256,"./ar-ly.js":256,"./ar-ma":257,"./ar-ma.js":257,"./ar-ps":258,"./ar-ps.js":258,"./ar-sa":259,"./ar-sa.js":259,"./ar-tn":260,"./ar-tn.js":260,"./ar.js":253,"./az":261,"./az.js":261,"./be":262,"./be.js":262,"./bg":263,"./bg.js":263,"./bm":264,"./bm.js":264,"./bn":265,"./bn-bd":266,"./bn-bd.js":266,"./bn.js":265,"./bo":267,"./bo.js":267,"./br":268,"./br.js":268,"./bs":269,"./bs.js":269,"./ca":270,"./ca.js":270,"./cs":271,"./cs.js":271,"./cv":272,"./cv.js":272,"./cy":273,"./cy.js":273,"./da":274,"./da.js":274,"./de":275,"./de-at":276,"./de-at.js":276,"./de-ch":277,"./de-ch.js":277,"./de.js":275,"./dv":278,"./dv.js":278,"./el":279,"./el.js":279,"./en-au":280,"./en-au.js":280,"./en-ca":281,"./en-ca.js":281,"./en-gb":282,"./en-gb.js":282,"./en-ie":283,"./en-ie.js":283,"./en-il":284,"./en-il.js":284,"./en-in":285,"./en-in.js":285,"./en-nz":286,"./en-nz.js":286,"./en-sg":287,"./en-sg.js":287,"./eo":288,"./eo.js":288,"./es":289,"./es-do":290,"./es-do.js":290,"./es-mx":291,"./es-mx.js":291,"./es-us":292,"./es-us.js":292,"./es.js":289,"./et":293,"./et.js":293,"./eu":294,"./eu.js":294,"./fa":295,"./fa.js":295,"./fi":296,"./fi.js":296,"./fil":297,"./fil.js":297,"./fo":298,"./fo.js":298,"./fr":299,"./fr-ca":300,"./fr-ca.js":300,"./fr-ch":301,"./fr-ch.js":301,"./fr.js":299,"./fy":302,"./fy.js":302,"./ga":303,"./ga.js":303,"./gd":304,"./gd.js":304,"./gl":305,"./gl.js":305,"./gom-deva":306,"./gom-deva.js":306,"./gom-latn":307,"./gom-latn.js":307,"./gu":308,"./gu.js":308,"./he":309,"./he.js":309,"./hi":310,"./hi.js":310,"./hr":311,"./hr.js":311,"./hu":312,"./hu.js":312,"./hy-am":313,"./hy-am.js":313,"./id":314,"./id.js":314,"./is":315,"./is.js":315,"./it":316,"./it-ch":317,"./it-ch.js":317,"./it.js":316,"./ja":318,"./ja.js":318,"./jv":319,"./jv.js":319,"./ka":320,"./ka.js":320,"./kk":321,"./kk.js":321,"./km":322,"./km.js":322,"./kn":323,"./kn.js":323,"./ko":324,"./ko.js":324,"./ku":325,"./ku-kmr":326,"./ku-kmr.js":326,"./ku.js":325,"./ky":327,"./ky.js":327,"./lb":328,"./lb.js":328,"./lo":329,"./lo.js":329,"./lt":330,"./lt.js":330,"./lv":331,"./lv.js":331,"./me":332,"./me.js":332,"./mi":333,"./mi.js":333,"./mk":334,"./mk.js":334,"./ml":335,"./ml.js":335,"./mn":336,"./mn.js":336,"./mr":337,"./mr.js":337,"./ms":338,"./ms-my":339,"./ms-my.js":339,"./ms.js":338,"./mt":340,"./mt.js":340,"./my":341,"./my.js":341,"./nb":342,"./nb.js":342,"./ne":343,"./ne.js":343,"./nl":344,"./nl-be":345,"./nl-be.js":345,"./nl.js":344,"./nn":346,"./nn.js":346,"./oc-lnc":347,"./oc-lnc.js":347,"./pa-in":348,"./pa-in.js":348,"./pl":349,"./pl.js":349,"./pt":350,"./pt-br":351,"./pt-br.js":351,"./pt.js":350,"./ro":352,"./ro.js":352,"./ru":353,"./ru.js":353,"./sd":354,"./sd.js":354,"./se":355,"./se.js":355,"./si":356,"./si.js":356,"./sk":357,"./sk.js":357,"./sl":358,"./sl.js":358,"./sq":359,"./sq.js":359,"./sr":360,"./sr-cyrl":361,"./sr-cyrl.js":361,"./sr.js":360,"./ss":362,"./ss.js":362,"./sv":363,"./sv.js":363,"./sw":364,"./sw.js":364,"./ta":365,"./ta.js":365,"./te":366,"./te.js":366,"./tet":367,"./tet.js":367,"./tg":368,"./tg.js":368,"./th":369,"./th.js":369,"./tk":370,"./tk.js":370,"./tl-ph":371,"./tl-ph.js":371,"./tlh":372,"./tlh.js":372,"./tr":373,"./tr.js":373,"./tzl":374,"./tzl.js":374,"./tzm":375,"./tzm-latn":376,"./tzm-latn.js":376,"./tzm.js":375,"./ug-cn":377,"./ug-cn.js":377,"./uk":378,"./uk.js":378,"./ur":379,"./ur.js":379,"./uz":380,"./uz-latn":381,"./uz-latn.js":381,"./uz.js":380,"./vi":382,"./vi.js":382,"./x-pseudo":383,"./x-pseudo.js":383,"./yo":384,"./yo.js":384,"./zh-cn":385,"./zh-cn.js":385,"./zh-hk":386,"./zh-hk.js":386,"./zh-mo":387,"./zh-mo.js":387,"./zh-tw":388,"./zh-tw.js":388};function i(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=a,e.exports=i,i.id=395},527:function(e,t,s){"use strict";s.r(t);s(98);var n=s(251),i=s.n(n),a={name:"PageInfo",data:()=>({page:{},table:"Post"}),created:function(){"undefined"!=typeof window&&this.initAV()},mounted(){this.isHomePage()||this.initPageInfo(),this.renderReadCount()},watch:{$route(e,t){"/"!==e.path&&e.path!==t.path&&this.$themeConfig.blogInfo&&this.initPageInfo(),e.path!==t.path&&this.$themeConfig.blogInfo&&this.renderReadCount()}},methods:{initAV(){this.isInitialized()||(window.AV.init(this.$themeConfig.LeanCloud),window.AV_INITIALIZED=!0)},isInitialized:()=>!!window.AV_INITIALIZED,find(e){const t=this.$page.key,s=new window.AV.Query(e);s.equalTo("postId",t),s.find().then(s=>{if(s.length){const e=s[0];return e.increment("readCount"),e.save()}{const s=new(window.AV.Object.extend(e));return s.set("postId",t),s.set("readCount",1),s.save()}}).then(e=>{console.log("保存成功:",e),this.page=e.toJSON(),this.page.updatedAt=i()(this.page.updatedAt).format("YYYY/MM/DD HH:mm:ss"),this.page.createdAt=i()(this.page.createdAt).format("YYYY/MM/DD HH:mm:ss");let t=this.isHomePage()?".vdoing-homepage #busuanzi_value_site_pv":".read-count > a",s=document.querySelector(t);null!=s&&(s.innerHTML=this.page.readCount)}).catch(e=>{console.log("保存失败:",e.message)})},isHomePage(){return this.$frontmatter.home},initPageInfo(){if(null==this.$frontmatter.article||this.$frontmatter.article){const{eachFileWords:e,pageView:t,pageIteration:s,readCount:n,readingTime:i}=this.$themeConfig.blogInfo;if(e)try{e.forEach(e=>{if(e.permalink==this.$frontmatter.permalink)throw this.addPageWordsCount(e.wordsCount),(i||null==i)&&this.addReadTimeCount(e.readingTime),new Error})}catch(e){}}},renderReadCount(){if(void 0===this.$frontmatter.article||this.$frontmatter.article){const{readCount:e}=this.$themeConfig.blogInfo;(e||void 0===e)&&(this.addReadCount(),this.find(this.table))}},addPageWordsCount(e=0){let t=document.querySelector(".book-words");if(t)t.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">${e}&nbsp;字</a>`;else{let t=document.createElement("div");t.title="文章字数",t.className="book-words iconfont icon-book",t.style.float="left",t.style.marginLeft="20px",t.style.fontSize="0.8rem",t.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">${e}&nbsp;字</a>`,this.mountedView(t)}},addReadTimeCount(e=0){let t=document.querySelector(".reading-time");if(t)t.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">大约${e}</a>`;else{let t=document.createElement("div");t.title="预阅读时长",t.className="reading-time iconfont icon-shijian",t.style.float="left",t.style.marginLeft="20px",t.style.fontSize="0.8rem",t.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">大约${e}</a>`,this.mountedView(t)}},addReadCount(){if(this.isHomePage())return;let e=document.querySelector(".page .info .read-count");const t='<a style="color: #888; margin-left: 3px" href="javascript:;" class="view-data"><i title="正在获取..." class="loading iconfont icon-loading"></i></a>';if(e)e.innerHTML=t;else{let e=document.createElement("div");e.title="浏览量",e.className="read-count iconfont icon-yuedushu",e.style.float="left",e.style.marginLeft="20px",e.style.fontSize="0.8rem",e.innerHTML=t;let s=document.createElement("style");s.innerHTML="@keyframes turn {\n                                    0% {\n                                    transform: rotate(0deg);\n                                    }\n                                    100% {\n                                    transform: rotate(360deg);\n                                    }\n                                }\n                                .loading {\n                                    display: inline-block;\n                                    animation: turn 1s linear infinite;\n                                    -webkit-animation: turn 1s linear infinite;\n                                }",document.head.appendChild(s),this.mountedView(e)}},mountedView(e,t=100,s=".articleInfo-wrap > .articleInfo > .info"){let n=document.querySelector(s);if(n)this.isMountedView(e,n)||n.appendChild(e);else{let i=setInterval(()=>{n=document.querySelector(s),n&&(this.isMountedView(e,n)||(n.appendChild(e),clearInterval(i)))},t);this.$once("hook:beforeDestroy",()=>{clearInterval(i),i=null})}},removeElement(e){var t=document.querySelector(e);t&&t.parentNode.removeChild(t)},isMountedView:(e,t)=>e.parentNode==t},beforeMount(){clearInterval(this.interval),this.removeElement(".page-view"),this.removeElement(".book-words"),this.removeElement(".reading-time"),this.removeElement(".read-count")}},o=s(4),r=Object(o.a)(a,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null);t.default=r.exports}}]);